# 2022年1月

## 1月26日

### AWS(VPNの勉強)

#### デジタル署名

デジタル署名とは、メッセージ、もしくはメッセージから作成したハッシュにプライベート鍵を使って暗号化したデータ。  
（ハッシュを暗号化する方法が一般的）  

1. 送信者Aは受信者Bに公開鍵を送信する
1. 送信者Aはッセージからハッシュを作成する
2. 秘密鍵でハッシュを暗号化する
3. メッセージと電子署名（ハッシュを暗号化したもの）を受信者Bに送る
4. Bは電子署名を公開鍵で複合したハッシュとメッセージから作成したハッシュを比較する
5. 結果が一致すれば送信者Aから送ったと認識できる（公開鍵で複合できたので）

デジタル署名の問題はAの公開鍵が正しいかどうか分からないところ！  
⇒　公開鍵の正当性を保証するために（公開鍵）証明書がある。

#### 公開鍵証明書

公開鍵の正当性を認証局が認めたもの。  
認証局とは公開鍵証明書を発行する組織。（ベリサインなど）  

1. Aは鍵ペア（秘密鍵・公開鍵）を作成する
2. Aは認証局に自分の公開鍵を登録する
3. 認証局は自分の秘密鍵を使ってAの公開鍵のデジタル署名を作成する
4. Bは認証局よりAの公開鍵証明書（Aの公開鍵と電子署名）を取得する
5. Bは認証局の公開鍵を使ってAの公開鍵を検証する
6. Bは公開鍵が正しければ、Aの公開鍵を使ってAにメッセージを送る
7. Aは秘密鍵を使ってメッセージを複合する

## 1月25日

### AWS(VPNの勉強)

#### サーバー証明書（SSL証明書）

https://jprs.jp/pubcert/about/#:~:text=%E3%80%8C%E3%82%B5%E3%83%BC%E3%83%90%E3%83%BC%E8%A8%BC%E6%98%8E%E6%9B%B8%E3%80%8D%E3%81%A8%E3%81%AF,%E3%82%82%E3%81%A4%E9%9B%BB%E5%AD%90%E8%A8%BC%E6%98%8E%E6%9B%B8%E3%81%A7%E3%81%99%E3%80%82&text=%E3%81%9D%E3%81%AE%E3%81%9F%E3%82%81%E3%80%81Web%E3%82%B5%E3%82%A4%E3%83%88%E3%81%AB%E3%82%B5%E3%83%BC%E3%83%90%E3%83%BC,%E4%BC%9D%E3%81%88%E3%82%8B%E3%81%93%E3%81%A8%E3%81%8C%E3%81%A7%E3%81%8D%E3%81%BE%E3%81%99%E3%80%82  

サーバー証明書とは「通信の暗号化」「Webサイトの運営者・運営組織の実在証明」の二つの役割を持つ電子証明書。  
サーバー証明書は認証局と呼ばれる組織が発行する。  
サーバー証明書にはサーバーの公開鍵と認証局のデジタル署名が入っている。  

#### サーバー証明書による通信の暗号化

https://www.rworks.jp/system/system-column/sys-entry/21283/  

1. クライアントからサーバーに接続要求する
2. サーバーからクライアントにサーバー証明書を送付
3. クライアントはあらかじめ登録されている認証局の証明書を使ってサーバー証明書を検証する
4. クライアントは共通鍵（セッションキー）を生成する
5. クライアントはサーバー証明書に含まれる公開鍵でセッションキーを暗号化し、サーバーに送付する
6. サーバーはセッションキーを秘密鍵で複合する
7. 以降、セッションキーで暗号化して通信を行う



## 1月24日

### JavaScript(Promiseの勉強)

Promiseの前にallow関数の理解。  
allow関数は次のような書式で記述する関数。メソッドを作らなくてもその場で記述できるのがメリット。  
慣れるまで読みにくいのがデメリットな気がする。  
```
var x = () => {return 3;} // 引数なし関数の定義
console.log(x());
var y = (a, b) => {return a + b;} // 引数ありを定義
console.log(y(2, 3));
setTimeout(() => {console.log("fuga");}, 1000);  // 第一引数に引数なし関数
// ↓と同じ
function test() {
  console.log("fuga");
}
setTimeout(test, 1000);
```

## 1月20日

### AWS

Elastic IPを持っているとその個数に応じて課金されるみたい。  
公開鍵資料(https://www.c-a-c.jp/about/knowledge.html)  

### JavaScript(Promiseの勉強)

公式ページではよく理解できなかったので他のサイトで勉強。    
まずは次のページより（https://techplay.jp/column/581）  
> Promiseとは非同期処理の操作が完了したときに結果を返すもの。（←なんとなく理解できる）  
> JavaScriptはシングルスレッドで動くため、複数の処理を並列で走らせることはできない。(そうなんや）  

この辺から分からなくなったので。別のサイトへ。(https://qiita.com/cheez921/items/41b744e4e002b966391a)  
> JavaScriptは処理を待てない（←え、どういうこと？）  

なんとなくここに書いてあることかな？(http://www.code-magagine.com/?p=1794)  
> JavaScriptは「非同期処理」なので基本的に一本道ではなく、色々なコードに飛び移りながらソースが実行されます。  

Qiitaの後のページをさらりと読んだが、分かりやすそうだったので明日も続ける。

## 1月19日

OpenVPNの静的鍵による通信を行うことができた。  
最初は日本語HPのクイックスタートガイドの方法で行ってみたが  
ドキュメントが最新版(2.5.5)に適合しないためか、うまく動作しなかった。  
https://www.openvpn.jp/document/quickstart-statickey/

かなり悩んだが、ドキュメントをもう一度見直すと次の記事を見つけることができ  
こちらの手順で行うことで、SSL通信を行うことができた。  
https://www.openvpn.jp/document/statickey-mini-howto/

ドキュメントに記載されていなかったので書いておくが  
OpenVPNを起動するには、サーバー、クライアントそれぞれのovpnファイルで右クリックし  
"tart Open VPN on this config file"を実行する必要がある。
